<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Posts on Yiqi&#39;s blog</title>
    <link>/zh/posts/</link>
    <description>Yiqi&#39;s blog (Posts)</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh</language>
    
      
        <managingEditor>halfseteamedbun@gmail.com
          
            (Yiqi)
          
        </managingEditor>
      

      
    

    
    <lastBuildDate>Sat, 18 May 2024 00:00:00 +0000</lastBuildDate>
    
    <atom:link href="/zh/posts/index.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>ä½¿ç”¨ GitLab CI è‡ªåŠ¨åˆå¹¶ master åˆ†æ”¯ä»£ç åˆ°å…¶ä»–åˆ†æ”¯</title>
      <link>/zh/posts/auto-merge/</link>
      <pubDate>Sat, 18 May 2024 00:00:00 +0000</pubDate>
      <author>halfseteamedbun@gmail.com (Yiqi)</author>
      <guid>/zh/posts/auto-merge/</guid>
      <description>&lt;h2 id=&#34;èƒŒæ™¯&#34;&gt;
  èƒŒæ™¯
&lt;/h2&gt;&lt;p&gt;åœ¨æˆ‘ä»¬çš„å¼€å‘æµç¨‹ä¸­ï¼Œè¦æ±‚åœ¨å‘å¸ƒä»£ç åˆå¹¶åˆ° &lt;code&gt;master&lt;/code&gt; åˆ†æ”¯åï¼Œ&lt;code&gt;stg&lt;/code&gt; å’Œ &lt;code&gt;pre&lt;/code&gt; åˆ†æ”¯ä¹Ÿå¿…é¡»åŒ…å«æœ€æ–°çš„ &lt;code&gt;master&lt;/code&gt; ä»£ç ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºæ­¤ï¼Œå…¬å¸è®¾ç½®äº†ä¸€ä¸ªæœºå™¨äººï¼ˆbotï¼‰æ¥æ¯”è¾ƒ commit å·®å¼‚ã€‚å¦‚æœåœ¨å‘å¸ƒä»£ç åˆå¹¶åˆ° &lt;code&gt;master&lt;/code&gt; åˆ†æ”¯ä¸€å¤©åï¼Œ&lt;code&gt;stg&lt;/code&gt; å’Œ &lt;code&gt;pre&lt;/code&gt; åˆ†æ”¯ä»æœªæ›´æ–°ï¼Œå›¢é˜Ÿæ”¶åˆ°æé†’ã€‚&lt;/p&gt;
&lt;p&gt;ç„¶è€Œï¼Œå›¢é˜Ÿæˆå‘˜ç»å¸¸å¿˜è®°æ‰‹åŠ¨æ‰§è¡Œè¿™ä¸ªåˆå¹¶æ“ä½œï¼Œå¯¼è‡´é¢‘ç¹çš„æé†’ï¼Œå½±å“äº†å·¥ä½œæ•ˆç‡ã€‚&lt;/p&gt;
&lt;h2 id=&#34;è§£å†³æ–¹æ¡ˆ&#34;&gt;
  è§£å†³æ–¹æ¡ˆ
&lt;/h2&gt;&lt;p&gt;ä¸ºäº†è‡ªåŠ¨åŒ–è¿™ä¸€æµç¨‹ï¼Œé¿å…äººä¸ºç–å¿½ï¼Œæˆ‘ç¼–å†™äº†ä¸€ä¸ª GitLab CI è„šæœ¬ï¼Œä¸€æ—¦ &lt;code&gt;master&lt;/code&gt; åˆ†æ”¯çš„ä»£ç å‘ç”Ÿå˜åŠ¨ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;è‡ªåŠ¨åˆå¹¶&lt;/strong&gt;ï¼šå°† &lt;code&gt;master&lt;/code&gt; åˆ†æ”¯çš„ä»£ç è‡ªåŠ¨åˆå¹¶åˆ° &lt;code&gt;stg&lt;/code&gt; å’Œ &lt;code&gt;pre&lt;/code&gt; åˆ†æ”¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¼‚å¸¸å¤„ç†&lt;/strong&gt;ï¼šå¦‚æœåˆå¹¶è¿‡ç¨‹ä¸­å‡ºç°å†²çªï¼Œå¯¼è‡´åˆå¹¶å¤±è´¥ï¼Œè„šæœ¬ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ª Merge Requestï¼ˆMRï¼‰ï¼Œæé†’å¼€å‘è€…åŠæ—¶å¤„ç†ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ä¸‹é¢è¯¦ç»†ä»‹ç»è¯¥è„šæœ¬çš„å®ç°è¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å®ç°æ­¥éª¤&#34;&gt;
  å®ç°æ­¥éª¤
&lt;/h2&gt;&lt;h3 id=&#34;1-æ·»åŠ æ–°çš„é˜¶æ®µ-merge&#34;&gt;
  1. æ·»åŠ æ–°çš„é˜¶æ®µ &lt;code&gt;merge&lt;/code&gt;
&lt;/h3&gt;&lt;p&gt;åœ¨ GitLab CI/CD ä¸­ï¼Œ&lt;code&gt;stages&lt;/code&gt; ç”¨äºå®šä¹‰æµæ°´çº¿ä¸­çš„å„ä¸ªé˜¶æ®µã€‚GitLab Runner ä¼šæŒ‰ç…§ &lt;code&gt;stages&lt;/code&gt; ä¸­å®šä¹‰çš„é¡ºåºä¾æ¬¡æ‰§è¡Œä»»åŠ¡ã€‚&lt;/p&gt;
&lt;p&gt;é¦–å…ˆï¼Œåœ¨ &lt;code&gt;.gitlab-ci.yml&lt;/code&gt; æ–‡ä»¶ä¸­æ·»åŠ ä¸€ä¸ªæ–°çš„é˜¶æ®µ &lt;code&gt;merge&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;stages&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  - merge
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;2-æ·»åŠ -merge-to-stg-ä»»åŠ¡&#34;&gt;
  2. æ·»åŠ  &lt;code&gt;merge-to-stg&lt;/code&gt; ä»»åŠ¡
&lt;/h3&gt;&lt;p&gt;å®šä¹‰ä¸€ä¸ªåä¸º &lt;code&gt;merge-to-stg&lt;/code&gt; çš„ä»»åŠ¡ï¼Œç”¨äºå°† &lt;code&gt;master&lt;/code&gt; åˆ†æ”¯çš„ä»£ç åˆå¹¶åˆ° &lt;code&gt;stg&lt;/code&gt; åˆ†æ”¯ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;merge-to-stg&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#ff6ac1&#34;&gt;stage&lt;/span&gt;: merge
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#ff6ac1&#34;&gt;allow_failure&lt;/span&gt;: &lt;span style=&#34;color:#ff6ac1&#34;&gt;true&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#ff6ac1&#34;&gt;only&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#ff6ac1&#34;&gt;refs&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      - master
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;é…ç½®è¯´æ˜ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;stage: merge&lt;/code&gt;ï¼šæŒ‡å®šè¯¥ä»»åŠ¡å±äº &lt;code&gt;merge&lt;/code&gt; é˜¶æ®µï¼Œç¡®ä¿å…¶åœ¨æ­£ç¡®çš„é˜¶æ®µæ‰§è¡Œã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;allow_failure: true&lt;/code&gt;ï¼šå…è®¸ä»»åŠ¡å¤±è´¥è€Œä¸å½±å“æ•´ä¸ªæµæ°´çº¿çš„çŠ¶æ€ã€‚å³ä½¿åˆå¹¶è¿‡ç¨‹ä¸­å‡ºç°å†²çªï¼Œå…¶ä»–ä»»åŠ¡ä»å¯ç»§ç»­æ‰§è¡Œï¼Œä¸ä¼šè¢«é˜»å¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;only&lt;/code&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;refs: - master&lt;/code&gt;ï¼šä»…åœ¨æ¨é€åˆ° &lt;code&gt;master&lt;/code&gt; åˆ†æ”¯æ—¶è§¦å‘è¯¥ä»»åŠ¡ï¼Œé¿å…åœ¨å…¶ä»–åˆ†æ”¯ä¸Šæ‰§è¡Œä¸å¿…è¦çš„æ“ä½œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;3-ç¼–å†™åˆå¹¶è„šæœ¬&#34;&gt;
  3. ç¼–å†™åˆå¹¶è„šæœ¬
&lt;/h3&gt;&lt;h4 id=&#34;31-é…ç½®-git-ç”¨æˆ·ä¿¡æ¯å¹¶è·å–æœ€æ–°ä»£ç &#34;&gt;
  3.1 é…ç½® Git ç”¨æˆ·ä¿¡æ¯å¹¶è·å–æœ€æ–°ä»£ç 
&lt;/h4&gt;&lt;p&gt;åœ¨ &lt;code&gt;script&lt;/code&gt; ä¸­ï¼Œé¦–å…ˆé…ç½® Git ç”¨æˆ·ä¿¡æ¯ï¼Œå¹¶è·å–è¿œç¨‹ä»“åº“çš„æœ€æ–°ä»£ç ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;script&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  - git config --global user.email &amp;#34;$GITLAB_USER_EMAIL&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  - git config --global user.name &amp;#34;$GITLAB_USER_LOGIN&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  - git fetch origin
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;è¯´æ˜ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é…ç½® Git ç”¨æˆ·ä¿¡æ¯&lt;/strong&gt;ï¼šä½¿ç”¨ç¯å¢ƒå˜é‡ &lt;code&gt;$GITLAB_USER_EMAIL&lt;/code&gt; å’Œ &lt;code&gt;$GITLAB_USER_LOGIN&lt;/code&gt; è®¾ç½® Git ç”¨æˆ·çš„é‚®ç®±å’Œç”¨æˆ·åã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è·å–è¿œç¨‹ä»£ç &lt;/strong&gt;ï¼š&lt;code&gt;git fetch origin&lt;/code&gt; è·å–è¿œç¨‹ä»“åº“çš„æœ€æ–°æäº¤ä¿¡æ¯ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;32-åˆ‡æ¢åˆ°ç›®æ ‡åˆ†æ”¯&#34;&gt;
  3.2 åˆ‡æ¢åˆ°ç›®æ ‡åˆ†æ”¯
&lt;/h4&gt;&lt;p&gt;åˆ‡æ¢åˆ°éœ€è¦åˆå¹¶ä»£ç çš„ç›®æ ‡åˆ†æ”¯ &lt;code&gt;stg&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;script&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  - git checkout stg
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;33-æ‰§è¡Œåˆå¹¶å¹¶è®°å½•çŠ¶æ€&#34;&gt;
  3.3 æ‰§è¡Œåˆå¹¶å¹¶è®°å½•çŠ¶æ€
&lt;/h4&gt;&lt;p&gt;æ‰§è¡Œåˆå¹¶æ“ä½œï¼Œå°† &lt;code&gt;master&lt;/code&gt; åˆ†æ”¯çš„ä»£ç åˆå¹¶åˆ°å½“å‰åˆ†æ”¯ï¼Œå¹¶æ¨é€åˆ°è¿œç¨‹ä»“åº“ã€‚ç„¶åè®°å½•åˆå¹¶çŠ¶æ€ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;script&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  - git merge origin/$CI_COMMIT_REF_NAME
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  - git push https://oauth2:$PROJECT_ACCESS_TOKEN@$CI_SERVER_HOST/$CI_PROJECT_PATH.git
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  - echo &amp;#34;SUCCESS&amp;#34; &amp;gt; .job_status
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;è¯´æ˜ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åˆå¹¶ä»£ç &lt;/strong&gt;ï¼š&lt;code&gt;git merge origin/$CI_COMMIT_REF_NAME&lt;/code&gt; å°† &lt;code&gt;origin/master&lt;/code&gt; åˆ†æ”¯çš„ä»£ç åˆå¹¶åˆ°å½“å‰åˆ†æ”¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¨é€ä»£ç &lt;/strong&gt;ï¼šä½¿ç”¨é¡¹ç›®è®¿é—®ä»¤ç‰Œå°†åˆå¹¶åçš„ä»£ç æ¨é€åˆ°è¿œç¨‹ä»“åº“ï¼ˆè¯·ç¡®ä¿åœ¨é¡¹ç›®ä¸­è®¾ç½®äº† &lt;code&gt;$PROJECT_ACCESS_TOKEN&lt;/code&gt; ç¯å¢ƒå˜é‡ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è®°å½•çŠ¶æ€&lt;/strong&gt;ï¼š&lt;code&gt;echo &amp;quot;SUCCESS&amp;quot; &amp;gt; .job_status&lt;/code&gt; å°†åˆå¹¶æˆåŠŸçš„çŠ¶æ€è®°å½•åˆ° &lt;code&gt;.job_status&lt;/code&gt; æ–‡ä»¶ä¸­ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;34-åœ¨ä»»åŠ¡å®Œæˆåæ£€æŸ¥åˆå¹¶çŠ¶æ€&#34;&gt;
  3.4 åœ¨ä»»åŠ¡å®Œæˆåæ£€æŸ¥åˆå¹¶çŠ¶æ€
&lt;/h4&gt;&lt;p&gt;ä½¿ç”¨ &lt;code&gt;after_script&lt;/code&gt; å®šä¹‰åœ¨ä»»åŠ¡æ‰§è¡Œç»“æŸåéœ€è¦æ‰§è¡Œçš„å‘½ä»¤ï¼Œæ£€æŸ¥åˆå¹¶æ˜¯å¦æˆåŠŸï¼Œå¹¶åœ¨å¤±è´¥æ—¶é‡‡å–ç›¸åº”æªæ–½ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;after_script&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  - job_status=$(cat .job_status 2&amp;gt;/dev/null || echo &amp;#34;FAILED&amp;#34;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  - current_branch=$(git rev-parse --abbrev-ref HEAD)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  - |&lt;span style=&#34;color:#5af78e&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#5af78e&#34;&gt;    if [ &amp;#34;$job_status&amp;#34; == &amp;#39;SUCCESS&amp;#39; ]; then
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#5af78e&#34;&gt;      echo &amp;#34;Merge to $current_branch succeeded.&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#5af78e&#34;&gt;    else
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#5af78e&#34;&gt;      echo &amp;#34;Merge to $current_branch failed.&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#5af78e&#34;&gt;      curl --request POST --header &amp;#34;PRIVATE-TOKEN:$PROJECT_ACCESS_TOKEN&amp;#34; \
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#5af78e&#34;&gt;      --data &amp;#34;source_branch=$CI_COMMIT_REF_NAME&amp;amp;target_branch=$current_branch&amp;amp;title=Auto merge $CI_COMMIT_REF_NAME to $current_branch&amp;#34; \
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#5af78e&#34;&gt;      &amp;#34;https://$CI_SERVER_HOST/api/v4/projects/$CI_PROJECT_ID/merge_requests&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#5af78e&#34;&gt;    fi&lt;/span&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;è¯´æ˜ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ£€æŸ¥åˆå¹¶çŠ¶æ€&lt;/strong&gt;ï¼šè¯»å– &lt;code&gt;.job_status&lt;/code&gt; æ–‡ä»¶ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™è§†ä¸ºåˆå¹¶å¤±è´¥ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ ¹æ®çŠ¶æ€æ‰§è¡Œæ“ä½œ&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æˆåŠŸ&lt;/strong&gt;ï¼šè¾“å‡ºæˆåŠŸä¿¡æ¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤±è´¥&lt;/strong&gt;ï¼šè¾“å‡ºå¤±è´¥ä¿¡æ¯ï¼Œå¹¶é€šè¿‡ GitLab API åˆ›å»ºä¸€ä¸ª MRï¼Œæé†’ç›¸å…³äººå‘˜å¤„ç†ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;4-æå–å…¬å…±è„šæœ¬ç‰‡æ®µä»¥å‡å°‘é‡å¤&#34;&gt;
  4. æå–å…¬å…±è„šæœ¬ç‰‡æ®µä»¥å‡å°‘é‡å¤
&lt;/h3&gt;&lt;p&gt;ç”±äºéœ€è¦å¯¹å¤šä¸ªåˆ†æ”¯æ‰§è¡Œç›¸åŒçš„æ“ä½œï¼Œä¸ºäº†æé«˜é…ç½®æ–‡ä»¶çš„å¯ç»´æŠ¤æ€§ï¼Œæˆ‘ä»¬ä½¿ç”¨ YAML çš„é”šç‚¹ï¼ˆ&lt;code&gt;&amp;amp;&lt;/code&gt;ï¼‰å’Œåˆ«åï¼ˆ&lt;code&gt;*&lt;/code&gt;ï¼‰æ¥æå–å…¬å…±çš„è„šæœ¬ç‰‡æ®µã€‚&lt;/p&gt;
&lt;h4 id=&#34;41-å®šä¹‰å…¬å…±è„šæœ¬ç‰‡æ®µ&#34;&gt;
  4.1 å®šä¹‰å…¬å…±è„šæœ¬ç‰‡æ®µ
&lt;/h4&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;.fetch_script&lt;/span&gt;: &lt;span style=&#34;color:#78787e&#34;&gt;&amp;amp;fetch_script&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  - git config --global user.email &amp;#34;$GITLAB_USER_EMAIL&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  - git config --global user.name &amp;#34;$GITLAB_USER_LOGIN&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  - git fetch origin
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;.merge_script&lt;/span&gt;: &lt;span style=&#34;color:#78787e&#34;&gt;&amp;amp;merge_script&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  - git merge origin/$CI_COMMIT_REF_NAME
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  - git push https://oauth2:$PROJECT_ACCESS_TOKEN@$CI_SERVER_HOST/$CI_PROJECT_PATH.git
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  - echo &amp;#34;SUCCESS&amp;#34; &amp;gt; .job_status
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;.check_status_script&lt;/span&gt;: &lt;span style=&#34;color:#78787e&#34;&gt;&amp;amp;check_status_script&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  - job_status=$(cat .job_status 2&amp;gt;/dev/null || echo &amp;#34;FAILED&amp;#34;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  - current_branch=$(git rev-parse --abbrev-ref HEAD)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  - |&lt;span style=&#34;color:#5af78e&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#5af78e&#34;&gt;    if [ &amp;#34;$job_status&amp;#34; == &amp;#39;SUCCESS&amp;#39; ]; then
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#5af78e&#34;&gt;      echo &amp;#34;Merge to $current_branch succeeded.&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#5af78e&#34;&gt;    else
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#5af78e&#34;&gt;      echo &amp;#34;Merge to $current_branch failed.&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#5af78e&#34;&gt;      curl --request POST --header &amp;#34;PRIVATE-TOKEN:$PROJECT_ACCESS_TOKEN&amp;#34; \
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#5af78e&#34;&gt;      --data &amp;#34;source_branch=$CI_COMMIT_REF_NAME&amp;amp;target_branch=$current_branch&amp;amp;title=Auto merge $CI_COMMIT_REF_NAME to $current_branch&amp;#34; \
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#5af78e&#34;&gt;      &amp;#34;https://$CI_SERVER_HOST/api/v4/projects/$CI_PROJECT_ID/merge_requests&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#5af78e&#34;&gt;    fi&lt;/span&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;42-åœ¨ä»»åŠ¡ä¸­å¼•ç”¨å…¬å…±è„šæœ¬&#34;&gt;
  4.2 åœ¨ä»»åŠ¡ä¸­å¼•ç”¨å…¬å…±è„šæœ¬
&lt;/h4&gt;&lt;p&gt;åœ¨åˆšåˆšçš„&lt;code&gt;merge-to-stg&lt;/code&gt;ä»»åŠ¡ä¸­ï¼Œä¿®æ”¹ä¸ºä½¿ç”¨ &lt;code&gt;*script_name&lt;/code&gt; å¼•ç”¨é¢„å…ˆå®šä¹‰çš„è„šæœ¬ç‰‡æ®µ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;merge-to-stg&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#ff6ac1&#34;&gt;stage&lt;/span&gt;: merge
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#ff6ac1&#34;&gt;allow_failure&lt;/span&gt;: &lt;span style=&#34;color:#ff6ac1&#34;&gt;true&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#ff6ac1&#34;&gt;script&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    - &lt;span style=&#34;color:#78787e&#34;&gt;*fetch_script&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    - git checkout stg
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    - &lt;span style=&#34;color:#78787e&#34;&gt;*merge_script&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#ff6ac1&#34;&gt;after_script&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    - &lt;span style=&#34;color:#78787e&#34;&gt;*check_status_script&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#ff6ac1&#34;&gt;only&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#ff6ac1&#34;&gt;refs&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      - master
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åŒæ ·ï¼Œå¯ä»¥è¿™ä¹ˆç¼–å†™ &lt;code&gt;merge-to-pre&lt;/code&gt; ä»»åŠ¡ï¼Œå°†ä»£ç åˆå¹¶åˆ° &lt;code&gt;pre&lt;/code&gt; åˆ†æ”¯ï¼Œé¿å…é‡å¤ç¼–å†™ç›¸åŒçš„ä»£ç ã€‚&lt;/p&gt;
&lt;h3 id=&#34;5-å®Œæ•´çš„-gitlab-ciyml-æ–‡ä»¶&#34;&gt;
  5. å®Œæ•´çš„ &lt;code&gt;.gitlab-ci.yml&lt;/code&gt; æ–‡ä»¶
&lt;/h3&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;image&lt;/span&gt;: your-docker-image
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;stages&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  - merge
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;.fetch_script&lt;/span&gt;: &lt;span style=&#34;color:#78787e&#34;&gt;&amp;amp;fetch_script&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  - git config --global user.email &amp;#34;$GITLAB_USER_EMAIL&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  - git config --global user.name &amp;#34;$GITLAB_USER_LOGIN&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  - git fetch origin
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;.merge_script&lt;/span&gt;: &lt;span style=&#34;color:#78787e&#34;&gt;&amp;amp;merge_script&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  - git merge origin/$CI_COMMIT_REF_NAME
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  - git push https://oauth2:$PROJECT_ACCESS_TOKEN@$CI_SERVER_HOST/$CI_PROJECT_PATH.git
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  - echo &amp;#34;SUCCESS&amp;#34; &amp;gt; .job_status
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;.check_status_script&lt;/span&gt;: &lt;span style=&#34;color:#78787e&#34;&gt;&amp;amp;check_status_script&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  - job_status=$(cat .job_status 2&amp;gt;/dev/null || echo &amp;#34;FAILED&amp;#34;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  - current_branch=$(git rev-parse --abbrev-ref HEAD)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  - |&lt;span style=&#34;color:#5af78e&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#5af78e&#34;&gt;    if [ &amp;#34;$job_status&amp;#34; == &amp;#39;SUCCESS&amp;#39; ]; then
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#5af78e&#34;&gt;      echo &amp;#34;Merge to $current_branch succeeded.&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#5af78e&#34;&gt;    else
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#5af78e&#34;&gt;      echo &amp;#34;Merge to $current_branch failed.&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#5af78e&#34;&gt;      curl --request POST --header &amp;#34;PRIVATE-TOKEN:$PROJECT_ACCESS_TOKEN&amp;#34; \
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#5af78e&#34;&gt;      --data &amp;#34;source_branch=$CI_COMMIT_REF_NAME&amp;amp;target_branch=$current_branch&amp;amp;title=Auto merge $CI_COMMIT_REF_NAME to $current_branch&amp;#34; \
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#5af78e&#34;&gt;      &amp;#34;https://$CI_SERVER_HOST/api/v4/projects/$CI_PROJECT_ID/merge_requests&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#5af78e&#34;&gt;    fi&lt;/span&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;merge-to-stg&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#ff6ac1&#34;&gt;stage&lt;/span&gt;: merge
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#ff6ac1&#34;&gt;allow_failure&lt;/span&gt;: &lt;span style=&#34;color:#ff6ac1&#34;&gt;true&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#ff6ac1&#34;&gt;script&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    - &lt;span style=&#34;color:#78787e&#34;&gt;*fetch_script&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    - git checkout stg
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    - &lt;span style=&#34;color:#78787e&#34;&gt;*merge_script&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#ff6ac1&#34;&gt;after_script&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    - &lt;span style=&#34;color:#78787e&#34;&gt;*check_status_script&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#ff6ac1&#34;&gt;only&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#ff6ac1&#34;&gt;refs&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      - master
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;merge-to-pre&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#ff6ac1&#34;&gt;stage&lt;/span&gt;: merge
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#ff6ac1&#34;&gt;allow_failure&lt;/span&gt;: &lt;span style=&#34;color:#ff6ac1&#34;&gt;true&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#ff6ac1&#34;&gt;script&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    - &lt;span style=&#34;color:#78787e&#34;&gt;*fetch_script&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    - git checkout pre
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    - &lt;span style=&#34;color:#78787e&#34;&gt;*merge_script&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#ff6ac1&#34;&gt;after_script&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    - &lt;span style=&#34;color:#78787e&#34;&gt;*check_status_script&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#ff6ac1&#34;&gt;only&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#ff6ac1&#34;&gt;refs&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      - master
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;æ€»ç»“&#34;&gt;
  æ€»ç»“
&lt;/h2&gt;&lt;p&gt;é€šè¿‡ä»¥ä¸Šé…ç½®ï¼Œæˆ‘ä»¬å®ç°äº† &lt;code&gt;master&lt;/code&gt; åˆ†æ”¯æœ‰ä»»ä½•å˜æ›´åï¼Œè‡ªåŠ¨å°†å…¶åˆå¹¶åˆ° &lt;code&gt;stg&lt;/code&gt; å’Œ &lt;code&gt;pre&lt;/code&gt; åˆ†æ”¯çš„åŠŸèƒ½ã€‚å³ä½¿åˆå¹¶è¿‡ç¨‹ä¸­å‡ºç°å†²çªï¼Œè„šæœ¬ä¹Ÿä¼šè‡ªåŠ¨åˆ›å»º MRï¼Œæé†’å¼€å‘è€…åŠæ—¶å¤„ç†ã€‚è¿™ç§è‡ªåŠ¨åŒ–æ–¹å¼æœ‰æ•ˆåœ°è§£å†³äº†å›¢é˜Ÿæˆå‘˜å¿˜è®°æ‰‹åŠ¨åˆå¹¶çš„é—®é¢˜ï¼Œç¡®ä¿äº†ä»£ç åœ¨ä¸åŒç¯å¢ƒä¸­çš„ä¸€è‡´æ€§ï¼Œæé«˜äº†å·¥ä½œæ•ˆç‡ã€‚&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Advance Typescript</title>
      <link>/zh/posts/advance-typescript/</link>
      <pubDate>Fri, 01 Mar 2024 16:23:03 +0800</pubDate>
      <author>halfseteamedbun@gmail.com (Yiqi)</author>
      <guid>/zh/posts/advance-typescript/</guid>
      <description>&lt;h2 id=&#34;èƒŒæ™¯&#34;&gt;
  èƒŒæ™¯
&lt;/h2&gt;&lt;h3 id=&#34;ä½¿ç”¨-typescript-çš„å¥½å¤„&#34;&gt;
  ä½¿ç”¨ TypeScript çš„å¥½å¤„
&lt;/h3&gt;&lt;p&gt;ä½¿ç”¨ TypeScript æœ‰å¾ˆå¤šçš„å¥½å¤„ï¼Œå®ƒå¯ä»¥è®©ä»£ç å˜å¾—æ›´å¯é å’Œæ›´å®¹æ˜“ç»´æŠ¤ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¯é æ€§&lt;/strong&gt;: TypeScript çš„ç±»å‹ç³»ç»Ÿèƒ½åœ¨å†™ä»£ç æ—¶æ•æ‰åˆ°å¾ˆå¤šé”™è¯¯ï¼Œè¿™æ ·å¯ä»¥å‡å°‘è¿è¡Œæ—¶çš„å‡ºé”™å‡ ç‡ï¼Œè®©ä»£ç æ›´åŠ ç¨³å®šã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¯è¯»æ€§&lt;/strong&gt;: æ˜ç¡®çš„ç±»å‹å®šä¹‰è®©ä»£ç æ›´å®¹æ˜“ç†è§£ï¼Œè¿™å¯¹å¼€å‘è€…æ¥è¯´ç»´æŠ¤èµ·æ¥æ›´ç®€å•ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é‡å‘½åå’Œé‡æ„çš„ä½æˆæœ¬&lt;/strong&gt;:ç±»å‹æ£€æŸ¥å™¨å¯ä»¥å¸®åŠ©æˆ‘ä»¬åœ¨é‡å‘½åå’Œé‡æ„ä»£ç æ—¶æ‰¾åˆ°æ­£ç¡®çš„å†…å®¹ï¼Œä»è€Œæœ‰æ•ˆå‡å°‘æ–°é”™è¯¯çš„å¼•å…¥é£é™©ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;å¦‚æœä¸å°å¿ƒæ»¥ç”¨&#34;&gt;
  å¦‚æœä¸å°å¿ƒæ»¥ç”¨&amp;hellip;?
&lt;/h3&gt;&lt;p&gt;ç„¶è€Œï¼ŒTypeScript ä¹Ÿåƒä¸€æŠŠåŒåˆƒå‰‘ï¼Œå¦‚æœä¸å°å¿ƒæ»¥ç”¨ï¼Œå¯èƒ½ä¼šå¼•å‘ä¸€äº›é—®é¢˜ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è”åˆç±»å‹çš„æ»¥ç”¨&lt;/strong&gt;: éšç€ä¸šåŠ¡é€»è¾‘çš„å¤æ‚åŒ–ï¼Œè”åˆç±»å‹å¯èƒ½ä¼šå˜å¾—è¶Šæ¥è¶Šå¤æ‚ï¼Œå¯¼è‡´æŸäº›å±æ€§å˜å¾—ä¸å¯è®¿é—®ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-TypeScript&#34; data-lang=&#34;TypeScript&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;type&lt;/span&gt; A &lt;span style=&#34;color:#ff6ac1&#34;&gt;=&lt;/span&gt; { foo: &lt;span style=&#34;color:#9aedfe&#34;&gt;string&lt;/span&gt; };
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;type&lt;/span&gt; B &lt;span style=&#34;color:#ff6ac1&#34;&gt;=&lt;/span&gt; { bar: &lt;span style=&#34;color:#9aedfe&#34;&gt;number&lt;/span&gt; };
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;type&lt;/span&gt; C &lt;span style=&#34;color:#ff6ac1&#34;&gt;=&lt;/span&gt; A &lt;span style=&#34;color:#ff6ac1&#34;&gt;|&lt;/span&gt; B;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff5c57&#34;&gt;function&lt;/span&gt; getFoo(obj: &lt;span style=&#34;color:#9aedfe&#34;&gt;C&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  obj.foo(); &lt;span style=&#34;color:#78787e&#34;&gt;// âŒ ä¸å­˜åœ¨
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#78787e&#34;&gt;&lt;/span&gt;  obj.bar(); &lt;span style=&#34;color:#78787e&#34;&gt;// âŒ ä¸å­˜åœ¨
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#78787e&#34;&gt;&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç±»å‹æ–­è¨€çš„æ»¥ç”¨&lt;/strong&gt;: ä¸ºäº†å¤„ç†å¤æ‚çš„ç±»å‹é—®é¢˜ï¼Œå¯èƒ½ä¼šé¢‘ç¹ä½¿ç”¨ &lt;code&gt;as&lt;/code&gt;æ“ä½œç¬¦ã€‚è™½ç„¶è¿™å¯ä»¥æŠŠé—®é¢˜è§£å†³ï¼Œä½†ä¼šä½¿ä»£ç å˜å¾—ä¸é‚£ä¹ˆä¼˜é›…å’Œè„†å¼±ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™äº›æ»¥ç”¨å¸¸å¸¸ä¼šè®©ä»£ç æ›´éš¾ç»´æŠ¤ï¼Œä¹Ÿæ›´å®¹æ˜“å‡ºé”™ã€‚&lt;/p&gt;
&lt;p&gt;æ¥ä¸‹æ¥ï¼Œæˆ‘ä¼šç»“åˆè‡ªå·±çš„å¼€å‘ç»éªŒï¼Œå’Œå¤§å®¶è®¨è®ºå¦‚ä½•æ›´å¥½åœ°ä½¿ç”¨ TypeScriptã€‚&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚æ³›å‹ã€&lt;code&gt;extends&lt;/code&gt;ã€&lt;code&gt;keyof&lt;/code&gt;ã€&lt;code&gt;infer&lt;/code&gt;ï¼Œç”šè‡³ç±»å‹é€’å½’ï¼Œå¸®åŠ©æˆ‘ä»¬ç¼–å†™æ›´å¥å£®ã€ä¼˜é›…ä¸”æ˜“ç»´æŠ¤çš„ä»£ç ã€‚&lt;/p&gt;
&lt;p&gt;é€šè¿‡æ·±å…¥ç†è§£å’Œåº”ç”¨è¿™äº›ç‰¹æ€§ï¼Œæˆ‘ä»¬å¯ä»¥æ›´å¥½åœ°åº”å¯¹å¤æ‚ç±»å‹çš„æŒ‘æˆ˜ï¼ŒåŒæ—¶ä¿æŒä»£ç çš„æ¸…æ™°å’Œå¯è¯»æ€§ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;lets-go-&#34;&gt;
  Let&amp;rsquo;s go ~
&lt;/h2&gt;&lt;h3 id=&#34;1-generic&#34;&gt;
  1. Generic
&lt;/h3&gt;&lt;p&gt;æ³›å‹æ˜¯ä¸€ç§è®©å‡½æ•°ã€æ¥å£æˆ–ç±»å‹å¯ä»¥æ¥å—å¤šç§ç±»å‹çš„ç‰¹æ€§ï¼Œä½¿ä»£ç æ›´åŠ é€šç”¨å’Œå¯å¤ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;ä»»ä½•ç±»å‹éƒ½å¯ä»¥æˆä¸ºæ³›å‹ã€‚å®ƒç”±ä½ æ¥åˆ¶å®šã€‚&lt;/p&gt;
&lt;p&gt;æ¯”å¦‚ä¸‹é¢çš„ä»£ç ï¼Œå½“ä¼ å…¥çš„ç±»å‹ T æ˜¯ &lt;code&gt;number&lt;/code&gt; ï¼Œé‚£ä¹ˆ è¿”å›ç±»å‹ T å°±æ˜¯ &lt;code&gt;number&lt;/code&gt;ã€‚å½“ä¼ å…¥çš„ç±»å‹ T æ˜¯ &lt;code&gt;string&lt;/code&gt; ï¼Œé‚£ä¹ˆ è¿”å›ç±»å‹ T å°±æ˜¯ &lt;code&gt;string&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-TypeScript&#34; data-lang=&#34;TypeScript&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff5c57&#34;&gt;function&lt;/span&gt; identity&amp;lt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;T&lt;/span&gt;&amp;gt;(arg: &lt;span style=&#34;color:#9aedfe&#34;&gt;T&lt;/span&gt;)&lt;span style=&#34;color:#ff6ac1&#34;&gt;:&lt;/span&gt; T {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#ff6ac1&#34;&gt;return&lt;/span&gt; arg;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;const&lt;/span&gt; num &lt;span style=&#34;color:#ff6ac1&#34;&gt;=&lt;/span&gt; identity(&lt;span style=&#34;color:#ff9f43&#34;&gt;42&lt;/span&gt;); &lt;span style=&#34;color:#78787e&#34;&gt;// number
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#78787e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;const&lt;/span&gt; str &lt;span style=&#34;color:#ff6ac1&#34;&gt;=&lt;/span&gt; identity(&lt;span style=&#34;color:#5af78e&#34;&gt;&amp;#39;hello&amp;#39;&lt;/span&gt;); &lt;span style=&#34;color:#78787e&#34;&gt;// string
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ³›å‹çš„ä½¿ç”¨å¯ä»¥å¸®åŠ©æˆ‘ä»¬å‡å°‘ä»£ç é‡å¤ï¼Œå¢å¼ºç±»å‹çš„çµæ´»æ€§å’Œå®‰å…¨æ€§ã€‚&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚å¤„ç† API å“åº”æ—¶ï¼Œ&lt;code&gt;ApiResponse&amp;lt;T&amp;gt;&lt;/code&gt; æ¥å£å¯ä»¥æ¥å—ä¸åŒç±»å‹çš„æ•°æ®ç»“æ„ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-TypeScript&#34; data-lang=&#34;TypeScript&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;type&lt;/span&gt; ApiResponse&amp;lt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;T&lt;/span&gt;&amp;gt; &lt;span style=&#34;color:#ff6ac1&#34;&gt;=&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  data: &lt;span style=&#34;color:#9aedfe&#34;&gt;T&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  status: &lt;span style=&#34;color:#9aedfe&#34;&gt;number&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  message: &lt;span style=&#34;color:#9aedfe&#34;&gt;string&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;};
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#78787e&#34;&gt;// ğŸ‘¤
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#78787e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;type&lt;/span&gt; User &lt;span style=&#34;color:#ff6ac1&#34;&gt;=&lt;/span&gt; { id: &lt;span style=&#34;color:#9aedfe&#34;&gt;number&lt;/span&gt;; name: &lt;span style=&#34;color:#9aedfe&#34;&gt;string&lt;/span&gt; };
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;const&lt;/span&gt; userResponse: &lt;span style=&#34;color:#9aedfe&#34;&gt;ApiResponse&lt;/span&gt;&amp;lt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;User&lt;/span&gt;&amp;gt; &lt;span style=&#34;color:#ff6ac1&#34;&gt;=&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  data&lt;span style=&#34;color:#ff6ac1&#34;&gt;:&lt;/span&gt; { id: &lt;span style=&#34;color:#9aedfe&#34;&gt;1&lt;/span&gt;, name&lt;span style=&#34;color:#ff6ac1&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#5af78e&#34;&gt;&amp;#34;Alice&amp;#34;&lt;/span&gt; },
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  status: &lt;span style=&#34;color:#9aedfe&#34;&gt;200&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  message&lt;span style=&#34;color:#ff6ac1&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#5af78e&#34;&gt;&amp;#34;Success&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;};
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#78787e&#34;&gt;// ğŸ“–
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#78787e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;type&lt;/span&gt; Book &lt;span style=&#34;color:#ff6ac1&#34;&gt;=&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  id: &lt;span style=&#34;color:#9aedfe&#34;&gt;number&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  title: &lt;span style=&#34;color:#9aedfe&#34;&gt;string&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  author: &lt;span style=&#34;color:#9aedfe&#34;&gt;string&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  price: &lt;span style=&#34;color:#9aedfe&#34;&gt;number&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  inStock: &lt;span style=&#34;color:#9aedfe&#34;&gt;boolean&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;};
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;const&lt;/span&gt; bookResponse: &lt;span style=&#34;color:#9aedfe&#34;&gt;ApiResponse&lt;/span&gt;&amp;lt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;Book&lt;/span&gt;&amp;gt; &lt;span style=&#34;color:#ff6ac1&#34;&gt;=&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  data&lt;span style=&#34;color:#ff6ac1&#34;&gt;:&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    id: &lt;span style=&#34;color:#9aedfe&#34;&gt;1&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    title&lt;span style=&#34;color:#ff6ac1&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#5af78e&#34;&gt;&amp;#34;æ·±å…¥ç†è§£ TypeScript&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    author&lt;span style=&#34;color:#ff6ac1&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#5af78e&#34;&gt;&amp;#34;å¼ ä¸‰&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    price: &lt;span style=&#34;color:#9aedfe&#34;&gt;59.99&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    inStock: &lt;span style=&#34;color:#9aedfe&#34;&gt;true&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  },
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  status: &lt;span style=&#34;color:#9aedfe&#34;&gt;200&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  message&lt;span style=&#34;color:#ff6ac1&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#5af78e&#34;&gt;&amp;#34;Success&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;};
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;2-keyof&#34;&gt;
  2. keyof
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;keyof&lt;/code&gt; å¯ä»¥è½»æ¾è·å– object çš„ keys&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-TypeScript&#34; data-lang=&#34;TypeScript&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;type&lt;/span&gt; User &lt;span style=&#34;color:#ff6ac1&#34;&gt;=&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    id: &lt;span style=&#34;color:#9aedfe&#34;&gt;number&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    name: &lt;span style=&#34;color:#9aedfe&#34;&gt;string&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    age: &lt;span style=&#34;color:#9aedfe&#34;&gt;number&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;};
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;type&lt;/span&gt; UserKeys &lt;span style=&#34;color:#ff6ac1&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ff6ac1&#34;&gt;keyof&lt;/span&gt; User; &lt;span style=&#34;color:#78787e&#34;&gt;// &amp;#34;id&amp;#34; | &amp;#34;name&amp;#34; | &amp;#34;age&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å‡è®¾æˆ‘ä»¬çš„åç«¯æ­£åœ¨åš v1 åˆ° v2 çš„ç‰ˆæœ¬å‡çº§ï¼Œv1 ç‰ˆæœ¬æ¥å£å’Œ v2 ç‰ˆæœ¬æ¥å£æ•°æ®çš„æ”¹å˜æ˜¯ key çš„å‘½åæ–¹å¼ä» snake_case å˜æˆ camelCaseï¼Œå…¶ä½™éƒ½ä¸€è‡´ã€‚é‚£ä¹ˆåŸæœ¬å‡½æ•°çš„æ•°æ®å¤„ç†é€»è¾‘æˆ‘ä»¬å¯ä»¥ä¿ç•™ï¼Œåªéœ€æŠŠå®ƒä¼ å…¥çš„æ•°æ®ç±»å‹å˜ä¸ºæ³›å‹ï¼Œå¹¶ä¸”é€šè¿‡ &lt;code&gt;keyof&lt;/code&gt; çº¦æŸéœ€è¦è¢«å¤„ç†çš„ key çš„è¾“å…¥ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-TypeScript&#34; data-lang=&#34;TypeScript&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;enum&lt;/span&gt; PayeeType {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  CASH_PAYEE &lt;span style=&#34;color:#ff6ac1&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ff9f43&#34;&gt;1&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  NON_CASH_PAYEE &lt;span style=&#34;color:#ff6ac1&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ff9f43&#34;&gt;2&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;type&lt;/span&gt; Address &lt;span style=&#34;color:#ff6ac1&#34;&gt;=&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  is_cash_payment_stop: &lt;span style=&#34;color:#9aedfe&#34;&gt;PayeeType&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;type&lt;/span&gt; AddressV2 &lt;span style=&#34;color:#ff6ac1&#34;&gt;=&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  isCashPaymentStop: &lt;span style=&#34;color:#9aedfe&#34;&gt;PayeeType&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;const&lt;/span&gt; getCashPayeeText &lt;span style=&#34;color:#ff6ac1&#34;&gt;=&lt;/span&gt; &amp;lt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;T&lt;/span&gt;&amp;gt;(address: &lt;span style=&#34;color:#9aedfe&#34;&gt;T&lt;/span&gt;[], field: &lt;span style=&#34;color:#9aedfe&#34;&gt;keyof&lt;/span&gt; T) &lt;span style=&#34;color:#ff6ac1&#34;&gt;=&amp;gt;&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#ff6ac1&#34;&gt;const&lt;/span&gt; cashPayeeIndex &lt;span style=&#34;color:#ff6ac1&#34;&gt;=&lt;/span&gt; address.findIndex(
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    (addr) &lt;span style=&#34;color:#ff6ac1&#34;&gt;=&amp;gt;&lt;/span&gt; addr[field] &lt;span style=&#34;color:#ff6ac1&#34;&gt;===&lt;/span&gt; PayeeType.CASH_PAYEE,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  )
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#ff6ac1&#34;&gt;if&lt;/span&gt; (cashPayeeIndex &lt;span style=&#34;color:#ff6ac1&#34;&gt;===&lt;/span&gt; &lt;span style=&#34;color:#ff6ac1&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ff9f43&#34;&gt;1&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#ff6ac1&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#5af78e&#34;&gt;&amp;#39;Not Specified&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#ff6ac1&#34;&gt;const&lt;/span&gt; isFirstStop &lt;span style=&#34;color:#ff6ac1&#34;&gt;=&lt;/span&gt; cashPayeeIndex &lt;span style=&#34;color:#ff6ac1&#34;&gt;===&lt;/span&gt; &lt;span style=&#34;color:#ff9f43&#34;&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#ff6ac1&#34;&gt;if&lt;/span&gt; (isFirstStop) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#ff6ac1&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#5af78e&#34;&gt;&amp;#39;Sender&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#ff6ac1&#34;&gt;const&lt;/span&gt; isLastStop &lt;span style=&#34;color:#ff6ac1&#34;&gt;=&lt;/span&gt; cashPayeeIndex &lt;span style=&#34;color:#ff6ac1&#34;&gt;===&lt;/span&gt; address.length &lt;span style=&#34;color:#ff6ac1&#34;&gt;-&lt;/span&gt; &lt;span style=&#34;color:#ff9f43&#34;&gt;1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#ff6ac1&#34;&gt;if&lt;/span&gt; (isLastStop) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#ff6ac1&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#5af78e&#34;&gt;&amp;#39;Recipient&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#ff6ac1&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#5af78e&#34;&gt;`Stop &lt;/span&gt;&lt;span style=&#34;color:#5af78e&#34;&gt;${&lt;/span&gt;cashPayeeIndex &lt;span style=&#34;color:#ff6ac1&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#ff9f43&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#5af78e&#34;&gt;}&lt;/span&gt;&lt;span style=&#34;color:#5af78e&#34;&gt;`&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;const&lt;/span&gt; getCashPayeeTextV1 &lt;span style=&#34;color:#ff6ac1&#34;&gt;=&lt;/span&gt; (address: &lt;span style=&#34;color:#9aedfe&#34;&gt;Address&lt;/span&gt;[]) &lt;span style=&#34;color:#ff6ac1&#34;&gt;=&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  getCashPayeeText(address, &lt;span style=&#34;color:#5af78e&#34;&gt;&amp;#39;is_cash_payment_stop&amp;#39;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;const&lt;/span&gt; getCashPayeeTextV2 &lt;span style=&#34;color:#ff6ac1&#34;&gt;=&lt;/span&gt; (address: &lt;span style=&#34;color:#9aedfe&#34;&gt;AddressV2&lt;/span&gt;[]) &lt;span style=&#34;color:#ff6ac1&#34;&gt;=&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  getCashPayeeText(address, &lt;span style=&#34;color:#5af78e&#34;&gt;&amp;#39;isCashPaymentStop&amp;#39;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#78787e&#34;&gt;//âŒ
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#78787e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;const&lt;/span&gt; getCashPayeeTextV2 &lt;span style=&#34;color:#ff6ac1&#34;&gt;=&lt;/span&gt; (address: &lt;span style=&#34;color:#9aedfe&#34;&gt;AddressV2&lt;/span&gt;[]) &lt;span style=&#34;color:#ff6ac1&#34;&gt;=&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  getCashPayeeText(address, &lt;span style=&#34;color:#5af78e&#34;&gt;&amp;#39;123&amp;#39;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#78787e&#34;&gt;//âŒ
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#78787e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;const&lt;/span&gt; getCashPayeeTextV2 &lt;span style=&#34;color:#ff6ac1&#34;&gt;=&lt;/span&gt; (address: &lt;span style=&#34;color:#9aedfe&#34;&gt;AddressV2&lt;/span&gt;[]) &lt;span style=&#34;color:#ff6ac1&#34;&gt;=&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  getCashPayeeText(address, &lt;span style=&#34;color:#5af78e&#34;&gt;&amp;#39;is_cash_payment_stop&amp;#39;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä½†åœ¨ä½¿ç”¨ä¸­å¯èƒ½ä¼šå‘ç°ä¸€ä¸ªé—®é¢˜ï¼Œç”±äº &lt;code&gt;keyof&lt;/code&gt; çš„ç»“æœæ˜¯ä¸€ä¸ªè”åˆç±»å‹ï¼Œé‚£ä¹ˆ &lt;code&gt;Type[keyof Type]&lt;/code&gt; çš„ç±»å‹ä¹Ÿä¼šæ˜¯è”åˆç±»å‹ã€‚&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥åœ¨ä¸‹é¢çš„å‡½æ•°ä¸­ï¼Œå³ä½¿æˆ‘ä»¬çŸ¥é“ä¼ å…¥çš„ key æ˜¯ä»€ä¹ˆç±»å‹ï¼Œä½†æ˜¯è¿”å›ç±»å‹å´æ˜¯ä¸€ä¸ªè”åˆç±»å‹&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-TypeScript&#34; data-lang=&#34;TypeScript&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff5c57&#34;&gt;function&lt;/span&gt; getProperty&amp;lt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;T&lt;/span&gt;&amp;gt;(obj: &lt;span style=&#34;color:#9aedfe&#34;&gt;T&lt;/span&gt;, key: &lt;span style=&#34;color:#9aedfe&#34;&gt;keyof&lt;/span&gt; T) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#ff6ac1&#34;&gt;return&lt;/span&gt; obj[key]
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;const&lt;/span&gt; user &lt;span style=&#34;color:#ff6ac1&#34;&gt;=&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  id: &lt;span style=&#34;color:#9aedfe&#34;&gt;1&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  name&lt;span style=&#34;color:#ff6ac1&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#5af78e&#34;&gt;&amp;#39;Alice&amp;#39;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  age: &lt;span style=&#34;color:#9aedfe&#34;&gt;30&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;const&lt;/span&gt; myName &lt;span style=&#34;color:#ff6ac1&#34;&gt;=&lt;/span&gt; getProperty(user, &lt;span style=&#34;color:#5af78e&#34;&gt;&amp;#39;name&amp;#39;&lt;/span&gt;) &lt;span style=&#34;color:#78787e&#34;&gt;//  string|number
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#78787e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;const&lt;/span&gt; myAge &lt;span style=&#34;color:#ff6ac1&#34;&gt;=&lt;/span&gt; getProperty(user, &lt;span style=&#34;color:#5af78e&#34;&gt;&amp;#39;age&amp;#39;&lt;/span&gt;) &lt;span style=&#34;color:#78787e&#34;&gt;// string|number
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;çœŸæ˜¯è®©äººæ²®ä¸§ï¼&lt;/p&gt;
&lt;p&gt;é‚£ä¹ˆå¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿäº¤ç»™ &lt;code&gt;extends&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h3 id=&#34;3-extends&#34;&gt;
  3. extends
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;extends&lt;/code&gt; æ“ä½œç¬¦å¯ç”¨äºç±»å‹çº¦æŸï¼Œç¡®ä¿ä¼ å…¥çš„ç±»å‹å…·æœ‰ç‰¹å®šçš„ç»“æ„ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;K extends keyof T&lt;/code&gt;å¯ä»¥ç†è§£ä¸ºï¼Œ&lt;code&gt;K&lt;/code&gt; æ˜¯æŸä¸ªç±»å‹ï¼Œè¿™ä¸ªç±»å‹åœ¨ &lt;code&gt;keyof T&lt;/code&gt; å†…ã€‚&lt;/p&gt;
&lt;p&gt;æ—¢ç„¶ä¸æ˜¯è”åˆç±»å‹ï¼Œè€Œæ˜¯å•ä¸€ç±»å‹ ï¼Œé‚£ä¹ˆç±»å‹æ¨å¯¼å¯ä»¥æ ¹æ® &lt;code&gt;K&lt;/code&gt; çš„ç±»å‹æˆåŠŸæ¨å¯¼å‡º &lt;code&gt;T[K]&lt;/code&gt;æ˜¯ä»€ä¹ˆç±»å‹äº† ğŸ‰ï¼&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-TypeScript&#34; data-lang=&#34;TypeScript&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff5c57&#34;&gt;function&lt;/span&gt; getProperty&amp;lt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;T&lt;/span&gt;&lt;span style=&#34;color:#ff5c57&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#57c7ff&#34;&gt;K&lt;/span&gt; &lt;span style=&#34;color:#57c7ff&#34;&gt;extends&lt;/span&gt; &lt;span style=&#34;color:#57c7ff&#34;&gt;keyof&lt;/span&gt; &lt;span style=&#34;color:#57c7ff&#34;&gt;T&lt;/span&gt;&amp;gt;(obj: &lt;span style=&#34;color:#9aedfe&#34;&gt;T&lt;/span&gt;, key: &lt;span style=&#34;color:#9aedfe&#34;&gt;K&lt;/span&gt;)&lt;span style=&#34;color:#ff6ac1&#34;&gt;:&lt;/span&gt; T[K] {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#ff6ac1&#34;&gt;return&lt;/span&gt; obj[key]
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;const&lt;/span&gt; user &lt;span style=&#34;color:#ff6ac1&#34;&gt;=&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  id: &lt;span style=&#34;color:#9aedfe&#34;&gt;1&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  name&lt;span style=&#34;color:#ff6ac1&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#5af78e&#34;&gt;&amp;#39;Alice&amp;#39;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  age: &lt;span style=&#34;color:#9aedfe&#34;&gt;30&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;const&lt;/span&gt; myName &lt;span style=&#34;color:#ff6ac1&#34;&gt;=&lt;/span&gt; getProperty(user, &lt;span style=&#34;color:#5af78e&#34;&gt;&amp;#39;name&amp;#39;&lt;/span&gt;) &lt;span style=&#34;color:#78787e&#34;&gt;//  string
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#78787e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;const&lt;/span&gt; myAge &lt;span style=&#34;color:#ff6ac1&#34;&gt;=&lt;/span&gt; getProperty(user, &lt;span style=&#34;color:#5af78e&#34;&gt;&amp;#39;age&amp;#39;&lt;/span&gt;) &lt;span style=&#34;color:#78787e&#34;&gt;// number
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;extends&lt;/code&gt;ä¹Ÿå¯ä»¥å’Œä¸‰ç›®è¿ç®—ç¬¦ç»“åˆï¼Œå¾—åˆ°æƒ³è¦çš„ç±»å‹&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-TypeScript&#34; data-lang=&#34;TypeScript&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;type&lt;/span&gt; Action &lt;span style=&#34;color:#ff6ac1&#34;&gt;=&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#ff6ac1&#34;&gt;|&lt;/span&gt; { action&lt;span style=&#34;color:#ff6ac1&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#5af78e&#34;&gt;&amp;#39;create&amp;#39;&lt;/span&gt;; item: &lt;span style=&#34;color:#9aedfe&#34;&gt;string&lt;/span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#ff6ac1&#34;&gt;|&lt;/span&gt; { action&lt;span style=&#34;color:#ff6ac1&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#5af78e&#34;&gt;&amp;#39;update&amp;#39;&lt;/span&gt;; itemId: &lt;span style=&#34;color:#9aedfe&#34;&gt;number&lt;/span&gt;; newValue: &lt;span style=&#34;color:#9aedfe&#34;&gt;string&lt;/span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#ff6ac1&#34;&gt;|&lt;/span&gt; { action&lt;span style=&#34;color:#ff6ac1&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#5af78e&#34;&gt;&amp;#39;delete&amp;#39;&lt;/span&gt;; itemId: &lt;span style=&#34;color:#9aedfe&#34;&gt;number&lt;/span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;type&lt;/span&gt; ExtractAction&amp;lt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;T&lt;/span&gt;&lt;span style=&#34;color:#ff5c57&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#57c7ff&#34;&gt;U&lt;/span&gt;&amp;gt; &lt;span style=&#34;color:#ff6ac1&#34;&gt;=&lt;/span&gt; T &lt;span style=&#34;color:#ff6ac1&#34;&gt;extends&lt;/span&gt; { action: &lt;span style=&#34;color:#9aedfe&#34;&gt;U&lt;/span&gt; } &lt;span style=&#34;color:#ff6ac1&#34;&gt;?&lt;/span&gt; T : &lt;span style=&#34;color:#9aedfe&#34;&gt;never&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;type&lt;/span&gt; CreateAction &lt;span style=&#34;color:#ff6ac1&#34;&gt;=&lt;/span&gt; ExtractAction&amp;lt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;Action&lt;/span&gt;&lt;span style=&#34;color:#ff5c57&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#ff5c57&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#57c7ff&#34;&gt;create&lt;/span&gt;&lt;span style=&#34;color:#ff5c57&#34;&gt;&amp;#39;&lt;/span&gt;&amp;gt; &lt;span style=&#34;color:#78787e&#34;&gt;// { action: &amp;#39;create&amp;#39;; item: string }
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#78787e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;type&lt;/span&gt; UpdateAction &lt;span style=&#34;color:#ff6ac1&#34;&gt;=&lt;/span&gt; ExtractAction&amp;lt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;Action&lt;/span&gt;&lt;span style=&#34;color:#ff5c57&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#ff5c57&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#57c7ff&#34;&gt;update&lt;/span&gt;&lt;span style=&#34;color:#ff5c57&#34;&gt;&amp;#39;&lt;/span&gt;&amp;gt; &lt;span style=&#34;color:#78787e&#34;&gt;// { action: &amp;#39;update&amp;#39;; itemId: number; newValue: string }
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#78787e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;type&lt;/span&gt; DeleteAction &lt;span style=&#34;color:#ff6ac1&#34;&gt;=&lt;/span&gt; ExtractAction&amp;lt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;Action&lt;/span&gt;&lt;span style=&#34;color:#ff5c57&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#ff5c57&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#57c7ff&#34;&gt;delete&lt;/span&gt;&lt;span style=&#34;color:#ff5c57&#34;&gt;&amp;#39;&lt;/span&gt;&amp;gt; &lt;span style=&#34;color:#78787e&#34;&gt;// { action: &amp;#39;delete&amp;#39;; itemId: number }
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;4-in&#34;&gt;
  4. in
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;in&lt;/code&gt; æ“ä½œç¬¦å¯ä»¥ç”¨äºéå†å¯¹è±¡ç±»å‹çš„é”®ï¼Œä»è€Œç”Ÿæˆæ–°çš„å¯¹è±¡ç±»å‹ã€‚
è¿™ç§æ–¹å¼å¯ä»¥ç”¨äºç”Ÿæˆå…·æœ‰ç‰¹å®šé”®åå’Œç±»å‹çš„å¯¹è±¡ï¼Œå¢åŠ ä»£ç çš„çµæ´»æ€§ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-TypeScript&#34; data-lang=&#34;TypeScript&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;type&lt;/span&gt; ValueBeKey&amp;lt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;T&lt;/span&gt; &lt;span style=&#34;color:#57c7ff&#34;&gt;extends&lt;/span&gt; &lt;span style=&#34;color:#57c7ff&#34;&gt;Record&lt;/span&gt;&lt;span style=&#34;color:#ff5c57&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span style=&#34;color:#57c7ff&#34;&gt;string&lt;/span&gt;&lt;span style=&#34;color:#ff5c57&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#57c7ff&#34;&gt;unknown&lt;/span&gt;&amp;gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#ff6ac1&#34;&gt;=&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  [P &lt;span style=&#34;color:#ff6ac1&#34;&gt;in&lt;/span&gt; &lt;span style=&#34;color:#ff6ac1&#34;&gt;keyof&lt;/span&gt; T]&lt;span style=&#34;color:#ff6ac1&#34;&gt;:&lt;/span&gt; P;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;};
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#9aedfe&#34;&gt;object&lt;/span&gt; &lt;span style=&#34;color:#ff6ac1&#34;&gt;=&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  a: &lt;span style=&#34;color:#9aedfe&#34;&gt;1&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  b: &lt;span style=&#34;color:#9aedfe&#34;&gt;2&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  c: &lt;span style=&#34;color:#9aedfe&#34;&gt;3&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;};
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;const&lt;/span&gt; result: &lt;span style=&#34;color:#9aedfe&#34;&gt;ValueBeKey&lt;/span&gt;&amp;lt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;typeof&lt;/span&gt; &lt;span style=&#34;color:#57c7ff&#34;&gt;object&lt;/span&gt;&amp;gt; &lt;span style=&#34;color:#ff6ac1&#34;&gt;=&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  a&lt;span style=&#34;color:#ff6ac1&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#5af78e&#34;&gt;&amp;#39;a&amp;#39;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  b&lt;span style=&#34;color:#ff6ac1&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#5af78e&#34;&gt;&amp;#39;b&amp;#39;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  c&lt;span style=&#34;color:#ff6ac1&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#5af78e&#34;&gt;&amp;#39;c&amp;#39;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;};
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è®©æˆ‘ä»¬æ¥å®ç°å®˜æ–¹æä¾›çš„ Partial å’Œ Required&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-TypeScript&#34; data-lang=&#34;TypeScript&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;type&lt;/span&gt; User &lt;span style=&#34;color:#ff6ac1&#34;&gt;=&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  id: &lt;span style=&#34;color:#9aedfe&#34;&gt;number&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  name: &lt;span style=&#34;color:#9aedfe&#34;&gt;string&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  age: &lt;span style=&#34;color:#9aedfe&#34;&gt;number&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;type&lt;/span&gt; Partial&amp;lt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;T&lt;/span&gt;&amp;gt; &lt;span style=&#34;color:#ff6ac1&#34;&gt;=&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  [K &lt;span style=&#34;color:#ff6ac1&#34;&gt;in&lt;/span&gt; &lt;span style=&#34;color:#ff6ac1&#34;&gt;keyof&lt;/span&gt; T]&lt;span style=&#34;color:#ff6ac1&#34;&gt;?:&lt;/span&gt; T[K]
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;type&lt;/span&gt; Required&amp;lt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;T&lt;/span&gt;&amp;gt; &lt;span style=&#34;color:#ff6ac1&#34;&gt;=&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  [K &lt;span style=&#34;color:#ff6ac1&#34;&gt;in&lt;/span&gt; &lt;span style=&#34;color:#ff6ac1&#34;&gt;keyof&lt;/span&gt; T]&lt;span style=&#34;color:#ff6ac1&#34;&gt;-?:&lt;/span&gt; T[K]
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;type&lt;/span&gt; OptionalUser &lt;span style=&#34;color:#ff6ac1&#34;&gt;=&lt;/span&gt; Partial&amp;lt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;User&lt;/span&gt;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;type&lt;/span&gt; RequiredUser &lt;span style=&#34;color:#ff6ac1&#34;&gt;=&lt;/span&gt; Required&amp;lt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;OptionalUser&lt;/span&gt;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä¹Ÿå¯ä»¥ç»“åˆ &lt;code&gt;as&lt;/code&gt;,æ ¹æ®ä»¥å‰çš„ key ç”Ÿæˆæ–°çš„ key name&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-TypeScript&#34; data-lang=&#34;TypeScript&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;type&lt;/span&gt; MappedUser &lt;span style=&#34;color:#ff6ac1&#34;&gt;=&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  [K &lt;span style=&#34;color:#ff6ac1&#34;&gt;in&lt;/span&gt; &lt;span style=&#34;color:#ff6ac1&#34;&gt;keyof&lt;/span&gt; User &lt;span style=&#34;color:#ff6ac1&#34;&gt;as&lt;/span&gt; &lt;span style=&#34;color:#5af78e&#34;&gt;`user_&lt;/span&gt;&lt;span style=&#34;color:#5af78e&#34;&gt;${&lt;/span&gt;K&lt;span style=&#34;color:#5af78e&#34;&gt;}&lt;/span&gt;&lt;span style=&#34;color:#5af78e&#34;&gt;`&lt;/span&gt;]&lt;span style=&#34;color:#ff6ac1&#34;&gt;:&lt;/span&gt; User[K]
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;type&lt;/span&gt; UserWithPrefixedKeys &lt;span style=&#34;color:#ff6ac1&#34;&gt;=&lt;/span&gt; MappedUser &lt;span style=&#34;color:#78787e&#34;&gt;// { user_id: number; user_name: string; user_age: number }
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æˆ–è€…å’Œ &lt;code&gt;extends&lt;/code&gt;ç»“åˆï¼Œç­›é€‰å‡ºç¬¦åˆå¯¹åº”ç±»å‹çš„ key&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-TypeScript&#34; data-lang=&#34;TypeScript&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;type&lt;/span&gt; FilterByType&amp;lt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;T&lt;/span&gt;&lt;span style=&#34;color:#ff5c57&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#57c7ff&#34;&gt;Condition&lt;/span&gt;&amp;gt; &lt;span style=&#34;color:#ff6ac1&#34;&gt;=&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  [K &lt;span style=&#34;color:#ff6ac1&#34;&gt;in&lt;/span&gt; &lt;span style=&#34;color:#ff6ac1&#34;&gt;keyof&lt;/span&gt; T]&lt;span style=&#34;color:#ff6ac1&#34;&gt;:&lt;/span&gt; T[K] &lt;span style=&#34;color:#ff6ac1&#34;&gt;extends&lt;/span&gt; Condition &lt;span style=&#34;color:#ff6ac1&#34;&gt;?&lt;/span&gt; K : &lt;span style=&#34;color:#9aedfe&#34;&gt;never&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}[&lt;span style=&#34;color:#ff6ac1&#34;&gt;keyof&lt;/span&gt; T]
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;type&lt;/span&gt; StringKeysOfUser &lt;span style=&#34;color:#ff6ac1&#34;&gt;=&lt;/span&gt; FilterByType&amp;lt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;User&lt;/span&gt;&lt;span style=&#34;color:#ff5c57&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#57c7ff&#34;&gt;string&lt;/span&gt;&amp;gt; &lt;span style=&#34;color:#78787e&#34;&gt;// name
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#78787e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;type&lt;/span&gt; NumberKeysOfUser &lt;span style=&#34;color:#ff6ac1&#34;&gt;=&lt;/span&gt; FilterByType&amp;lt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;User&lt;/span&gt;&lt;span style=&#34;color:#ff5c57&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#57c7ff&#34;&gt;number&lt;/span&gt;&amp;gt; &lt;span style=&#34;color:#78787e&#34;&gt;// &amp;#34;id&amp;#34; | &amp;#34;age&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å‡å¦‚å­˜åœ¨ä¸€ä¸ªæ¥å£ï¼Œå®ƒçš„è¯·æ±‚ä¸­å¦‚æœå¸¦æœ‰ &lt;code&gt;user&lt;/code&gt; åˆ™æ¥å£ä¸­å°±ä¼šè¿”å› &lt;code&gt;user&lt;/code&gt;å¯¹è±¡ï¼Œå®ƒçš„è¯·æ±‚ä¸­å¦‚æœå¸¦æœ‰ &lt;code&gt;driver&lt;/code&gt; åˆ™æ¥å£ä¸­å°±ä¼šè¿”å› &lt;code&gt;driver&lt;/code&gt;å¯¹è±¡ã€‚å®ƒçš„è¯·æ±‚ä¸­å¦‚æœå¸¦æœ‰&lt;code&gt;user&lt;/code&gt;å’Œ&lt;code&gt;driver&lt;/code&gt;ï¼Œé‚£ä¹ˆå°±ä¼šè¿”å›&lt;code&gt;user&lt;/code&gt;å’Œ&lt;code&gt;driver&lt;/code&gt;å¯¹è±¡ã€‚é‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥ç»“åˆä¸Šé¢çš„ &lt;code&gt;extends&lt;/code&gt; å¸®æˆ‘ä»¬å®Œæˆè¿™ä»¶äº‹ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-TypeScript&#34; data-lang=&#34;TypeScript&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;type&lt;/span&gt; Extensions &lt;span style=&#34;color:#ff6ac1&#34;&gt;=&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  user&lt;span style=&#34;color:#ff6ac1&#34;&gt;:&lt;/span&gt; { id: &lt;span style=&#34;color:#9aedfe&#34;&gt;string&lt;/span&gt;; name: &lt;span style=&#34;color:#9aedfe&#34;&gt;string&lt;/span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  driver&lt;span style=&#34;color:#ff6ac1&#34;&gt;:&lt;/span&gt; { phone: &lt;span style=&#34;color:#9aedfe&#34;&gt;string&lt;/span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;type&lt;/span&gt; GetOrderParams&amp;lt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;K&lt;/span&gt; &lt;span style=&#34;color:#57c7ff&#34;&gt;extends&lt;/span&gt; &lt;span style=&#34;color:#57c7ff&#34;&gt;keyof&lt;/span&gt; &lt;span style=&#34;color:#57c7ff&#34;&gt;Extensions&lt;/span&gt;&amp;gt; &lt;span style=&#34;color:#ff6ac1&#34;&gt;=&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  orderUuid: &lt;span style=&#34;color:#9aedfe&#34;&gt;string&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  extendKeys?: &lt;span style=&#34;color:#9aedfe&#34;&gt;K&lt;/span&gt;[]
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;type&lt;/span&gt; OrderResponse&amp;lt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;K&lt;/span&gt; &lt;span style=&#34;color:#57c7ff&#34;&gt;extends&lt;/span&gt; &lt;span style=&#34;color:#57c7ff&#34;&gt;keyof&lt;/span&gt; &lt;span style=&#34;color:#57c7ff&#34;&gt;Extensions&lt;/span&gt;&amp;gt; &lt;span style=&#34;color:#ff6ac1&#34;&gt;=&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  orderUuid: &lt;span style=&#34;color:#9aedfe&#34;&gt;string&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  cityId: &lt;span style=&#34;color:#9aedfe&#34;&gt;string&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  marketId: &lt;span style=&#34;color:#9aedfe&#34;&gt;number&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  extensions&lt;span style=&#34;color:#ff6ac1&#34;&gt;:&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    [key &lt;span style=&#34;color:#ff6ac1&#34;&gt;in&lt;/span&gt; K]&lt;span style=&#34;color:#ff6ac1&#34;&gt;:&lt;/span&gt; Extensions[key]
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;export&lt;/span&gt; &lt;span style=&#34;color:#ff6ac1&#34;&gt;const&lt;/span&gt; getOrder &lt;span style=&#34;color:#ff6ac1&#34;&gt;=&lt;/span&gt; &amp;lt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;K&lt;/span&gt; &lt;span style=&#34;color:#57c7ff&#34;&gt;extends&lt;/span&gt; &lt;span style=&#34;color:#57c7ff&#34;&gt;keyof&lt;/span&gt; &lt;span style=&#34;color:#57c7ff&#34;&gt;Extensions&lt;/span&gt;&amp;gt;({
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  orderUuid,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  extendKeys,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&lt;span style=&#34;color:#ff6ac1&#34;&gt;:&lt;/span&gt; GetOrderParams&amp;lt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;K&lt;/span&gt;&amp;gt;) &lt;span style=&#34;color:#ff6ac1&#34;&gt;=&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  httpClient.&lt;span style=&#34;color:#ff6ac1&#34;&gt;get&lt;/span&gt;&amp;lt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;OrderResponse&lt;/span&gt;&lt;span style=&#34;color:#ff5c57&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span style=&#34;color:#57c7ff&#34;&gt;K&lt;/span&gt;&amp;gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;&amp;gt;&lt;/span&gt;(&lt;span style=&#34;color:#5af78e&#34;&gt;&amp;#39;/api/order/detail&amp;#39;&lt;/span&gt;, {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    params&lt;span style=&#34;color:#ff6ac1&#34;&gt;:&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      orderUuid,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      ...(&lt;span style=&#34;color:#ff6ac1&#34;&gt;!&lt;/span&gt;isEmpty(extendKeys) &lt;span style=&#34;color:#ff6ac1&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; { extendKeys: &lt;span style=&#34;color:#9aedfe&#34;&gt;extendKeys?.join&lt;/span&gt;(&lt;span style=&#34;color:#5af78e&#34;&gt;&amp;#39;,&amp;#39;&lt;/span&gt;) }),
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    },
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  })
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;const&lt;/span&gt; order &lt;span style=&#34;color:#ff6ac1&#34;&gt;=&lt;/span&gt; getOrder({ orderUuid&lt;span style=&#34;color:#ff6ac1&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#5af78e&#34;&gt;&amp;#39;123&amp;#39;&lt;/span&gt;, extendKeys&lt;span style=&#34;color:#ff6ac1&#34;&gt;:&lt;/span&gt; [&lt;span style=&#34;color:#5af78e&#34;&gt;&amp;#39;user&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#5af78e&#34;&gt;&amp;#39;driver&amp;#39;&lt;/span&gt;] })
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;order.then(({ data }) &lt;span style=&#34;color:#ff6ac1&#34;&gt;=&amp;gt;&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  console.log(data.extensions.user.name)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  console.log(data.extensions.driver.phone)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;})
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;5-number&#34;&gt;
  5. [number]
&lt;/h3&gt;&lt;p&gt;ä½¿ç”¨ç´¢å¼•è®¿é—®ç±»å‹å¯ä»¥è·å–å…ƒç»„æˆ–æ•°ç»„ä¸­å…ƒç´ çš„ç±»å‹ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-TypeScript&#34; data-lang=&#34;TypeScript&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;type&lt;/span&gt; Parent &lt;span style=&#34;color:#ff6ac1&#34;&gt;=&lt;/span&gt; [&lt;span style=&#34;color:#9aedfe&#34;&gt;string&lt;/span&gt;, &lt;span style=&#34;color:#9aedfe&#34;&gt;number&lt;/span&gt;];
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;type&lt;/span&gt; Child &lt;span style=&#34;color:#ff6ac1&#34;&gt;=&lt;/span&gt; Parent[&lt;span style=&#34;color:#9aedfe&#34;&gt;number&lt;/span&gt;]; &lt;span style=&#34;color:#78787e&#34;&gt;// string | number
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;6-infer&#34;&gt;
  6. infer
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;infer&lt;/code&gt; ç”¨äºåœ¨æ¡ä»¶ç±»å‹ä¸­å’Œ &lt;code&gt;extends &lt;/code&gt;ç»“åˆå¼•å…¥ä¸€ä¸ªå˜é‡ï¼Œä»¥æ¨æ–­æŸä¸ªç±»å‹ã€‚&lt;/p&gt;
&lt;p&gt;å®ƒåœ¨å¤æ‚ç±»å‹æ“ä½œä¸­éå¸¸æœ‰ç”¨ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤„ç†å‡½æ•°è¿”å›å€¼ç±»å‹æ—¶ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-TypeScript&#34; data-lang=&#34;TypeScript&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;type&lt;/span&gt; ReturnType&amp;lt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;T&lt;/span&gt;&amp;gt; &lt;span style=&#34;color:#ff6ac1&#34;&gt;=&lt;/span&gt; T &lt;span style=&#34;color:#ff6ac1&#34;&gt;extends&lt;/span&gt; (...args: &lt;span style=&#34;color:#9aedfe&#34;&gt;any&lt;/span&gt;[]) &lt;span style=&#34;color:#ff6ac1&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#ff6ac1&#34;&gt;infer&lt;/span&gt; R &lt;span style=&#34;color:#ff6ac1&#34;&gt;?&lt;/span&gt; R : &lt;span style=&#34;color:#9aedfe&#34;&gt;never&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;interface&lt;/span&gt; OrderReportsProps {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  isDisplayLanguageDropdown: &lt;span style=&#34;color:#9aedfe&#34;&gt;boolean&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  language: &lt;span style=&#34;color:#9aedfe&#34;&gt;ReturnType&lt;/span&gt;&amp;lt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;typeof&lt;/span&gt; &lt;span style=&#34;color:#57c7ff&#34;&gt;useLanguage&lt;/span&gt;&amp;gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¯ä»¥å®ç°å’Œä¸Šé¢çš„ &lt;code&gt;[number]&lt;/code&gt; ä¸€æ ·çš„åŠŸèƒ½&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-Typescript&#34; data-lang=&#34;Typescript&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;type&lt;/span&gt; Parent &lt;span style=&#34;color:#ff6ac1&#34;&gt;=&lt;/span&gt; [&lt;span style=&#34;color:#9aedfe&#34;&gt;string&lt;/span&gt;, &lt;span style=&#34;color:#9aedfe&#34;&gt;number&lt;/span&gt;];
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;type&lt;/span&gt; Flatten&amp;lt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;T&lt;/span&gt;&amp;gt; &lt;span style=&#34;color:#ff6ac1&#34;&gt;=&lt;/span&gt; T &lt;span style=&#34;color:#ff6ac1&#34;&gt;extends&lt;/span&gt; (&lt;span style=&#34;color:#ff6ac1&#34;&gt;infer&lt;/span&gt; R)[] &lt;span style=&#34;color:#ff6ac1&#34;&gt;?&lt;/span&gt; R : &lt;span style=&#34;color:#9aedfe&#34;&gt;T&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;type&lt;/span&gt; Child &lt;span style=&#34;color:#ff6ac1&#34;&gt;=&lt;/span&gt; Flatten&amp;lt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;Parent&lt;/span&gt;&amp;gt;; &lt;span style=&#34;color:#78787e&#34;&gt;// string | number
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä¹Ÿå¯ä»¥ç”¨äºè·å–æŸä¸ª filed çš„å€¼&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-TypeScript&#34; data-lang=&#34;TypeScript&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;type&lt;/span&gt; Action &lt;span style=&#34;color:#ff6ac1&#34;&gt;=&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#ff6ac1&#34;&gt;|&lt;/span&gt; { action&lt;span style=&#34;color:#ff6ac1&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#5af78e&#34;&gt;&amp;#34;create&amp;#34;&lt;/span&gt;; item: &lt;span style=&#34;color:#9aedfe&#34;&gt;string&lt;/span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#ff6ac1&#34;&gt;|&lt;/span&gt; { action&lt;span style=&#34;color:#ff6ac1&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#5af78e&#34;&gt;&amp;#34;update&amp;#34;&lt;/span&gt;; itemId: &lt;span style=&#34;color:#9aedfe&#34;&gt;number&lt;/span&gt;; newValue: &lt;span style=&#34;color:#9aedfe&#34;&gt;string&lt;/span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#ff6ac1&#34;&gt;|&lt;/span&gt; { action&lt;span style=&#34;color:#ff6ac1&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#5af78e&#34;&gt;&amp;#34;delete&amp;#34;&lt;/span&gt;; itemId: &lt;span style=&#34;color:#9aedfe&#34;&gt;number&lt;/span&gt; };
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;type&lt;/span&gt; GetActionValue&amp;lt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;T&lt;/span&gt;&amp;gt; &lt;span style=&#34;color:#ff6ac1&#34;&gt;=&lt;/span&gt; T &lt;span style=&#34;color:#ff6ac1&#34;&gt;extends&lt;/span&gt; { action: &lt;span style=&#34;color:#9aedfe&#34;&gt;infer&lt;/span&gt; U } &lt;span style=&#34;color:#ff6ac1&#34;&gt;?&lt;/span&gt; U : &lt;span style=&#34;color:#9aedfe&#34;&gt;never&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;type&lt;/span&gt; Value &lt;span style=&#34;color:#ff6ac1&#34;&gt;=&lt;/span&gt; GetActionValue&amp;lt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;Action&lt;/span&gt;&amp;gt;; &lt;span style=&#34;color:#78787e&#34;&gt;// &amp;#34;create&amp;#34; | &amp;#34;update&amp;#34; | &amp;#34;delete&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;7-é€’å½’&#34;&gt;
  7. é€’å½’
&lt;/h3&gt;&lt;p&gt;æ˜¯çš„ï¼Œç±»å‹ä¹Ÿå¯ä»¥ä½¿ç”¨é€’å½’ ! æœ‰å¾ˆå¤šæœ‰è¶£çš„ç©æ³•ã€‚&lt;/p&gt;
&lt;p&gt;ä½†è¦æ³¨æ„ï¼Œåªæœ‰ &lt;code&gt;type&lt;/code&gt; åˆ›é€ çš„ç±»å‹æ‰å¯ä»¥è¿›è¡Œé€’å½’ï¼Œ&lt;code&gt;interface&lt;/code&gt; çš„ä¸å¯ä»¥&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-TypeScript&#34; data-lang=&#34;TypeScript&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;type&lt;/span&gt; Test &lt;span style=&#34;color:#ff6ac1&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#5af78e&#34;&gt;&amp;#34;123&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;type&lt;/span&gt; StrintToUnion&amp;lt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;T&lt;/span&gt; &lt;span style=&#34;color:#57c7ff&#34;&gt;extends&lt;/span&gt; &lt;span style=&#34;color:#57c7ff&#34;&gt;string&lt;/span&gt;&amp;gt; &lt;span style=&#34;color:#ff6ac1&#34;&gt;=&lt;/span&gt; T &lt;span style=&#34;color:#ff6ac1&#34;&gt;extends&lt;/span&gt; &lt;span style=&#34;color:#5af78e&#34;&gt;`&lt;/span&gt;&lt;span style=&#34;color:#5af78e&#34;&gt;${&lt;/span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;infer&lt;/span&gt; LetterÂ &lt;span style=&#34;color:#5af78e&#34;&gt;}${&lt;/span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;infer&lt;/span&gt; Rest&lt;span style=&#34;color:#5af78e&#34;&gt;}&lt;/span&gt;&lt;span style=&#34;color:#5af78e&#34;&gt;`&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#ff6ac1&#34;&gt;?&lt;/span&gt; Letter &lt;span style=&#34;color:#ff6ac1&#34;&gt;|&lt;/span&gt; StrintToUnion&amp;lt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;Rest&lt;/span&gt;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#ff6ac1&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#9aedfe&#34;&gt;never&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;type&lt;/span&gt; Result &lt;span style=&#34;color:#ff6ac1&#34;&gt;=&lt;/span&gt; StringToUnion&amp;lt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;Test&lt;/span&gt;&amp;gt; &lt;span style=&#34;color:#78787e&#34;&gt;//  &amp;#34;1&amp;#34; | &amp;#34;2&amp;#34; | &amp;#34;3&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å‡è®¾æˆ‘ä»¬æƒ³è¦æ‹¿åˆ°æŸä¸ª nested å¯¹è±¡çš„ key å»æ›´æ–°ï¼Œä¸ºäº†é¿å… typo ï¼Œå°±å¯ä»¥åˆ©ç”¨é€’å½’åˆ›å»ºä¸€ä¸ª key value éƒ½ç­‰äºè¿™ä¸ª nested å¯¹è±¡æ‰€æœ‰ key çš„ç±»å‹ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-TypeScript&#34; data-lang=&#34;TypeScript&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;type&lt;/span&gt; ObjectKeyPaths&amp;lt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;T&lt;/span&gt;&lt;span style=&#34;color:#ff5c57&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#57c7ff&#34;&gt;K&lt;/span&gt; &lt;span style=&#34;color:#57c7ff&#34;&gt;extends&lt;/span&gt; &lt;span style=&#34;color:#57c7ff&#34;&gt;keyof&lt;/span&gt; &lt;span style=&#34;color:#57c7ff&#34;&gt;T &lt;/span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#57c7ff&#34;&gt;keyof&lt;/span&gt; &lt;span style=&#34;color:#57c7ff&#34;&gt;T&lt;/span&gt;&amp;gt; &lt;span style=&#34;color:#ff6ac1&#34;&gt;=&lt;/span&gt; T &lt;span style=&#34;color:#ff6ac1&#34;&gt;extends&lt;/span&gt; Record&lt;span style=&#34;color:#ff6ac1&#34;&gt;&amp;lt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#9aedfe&#34;&gt;string&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#9aedfe&#34;&gt;unknown&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#ff6ac1&#34;&gt;?&lt;/span&gt; K &lt;span style=&#34;color:#ff6ac1&#34;&gt;extends&lt;/span&gt; &lt;span style=&#34;color:#9aedfe&#34;&gt;string&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#ff6ac1&#34;&gt;?&lt;/span&gt; &lt;span style=&#34;color:#5af78e&#34;&gt;`&lt;/span&gt;&lt;span style=&#34;color:#5af78e&#34;&gt;${&lt;/span&gt;K&lt;span style=&#34;color:#5af78e&#34;&gt;}${&lt;/span&gt;&lt;span style=&#34;color:#5af78e&#34;&gt;&amp;#39;&amp;#39;&lt;/span&gt; &lt;span style=&#34;color:#ff6ac1&#34;&gt;|&lt;/span&gt; &lt;span style=&#34;color:#5af78e&#34;&gt;`&lt;/span&gt;&lt;span style=&#34;color:#5af78e&#34;&gt;${&lt;/span&gt;&lt;span style=&#34;color:#5af78e&#34;&gt;&amp;#39;.&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#5af78e&#34;&gt;}${&lt;/span&gt;ObjectKeyPaths&amp;lt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;T&lt;/span&gt;&lt;span style=&#34;color:#ff5c57&#34;&gt;[&lt;/span&gt;&lt;span style=&#34;color:#57c7ff&#34;&gt;K&lt;/span&gt;&lt;span style=&#34;color:#ff5c57&#34;&gt;]&lt;/span&gt;&amp;gt;&lt;span style=&#34;color:#5af78e&#34;&gt;}&lt;/span&gt;&lt;span style=&#34;color:#5af78e&#34;&gt;`&lt;/span&gt;&lt;span style=&#34;color:#5af78e&#34;&gt;}&lt;/span&gt;&lt;span style=&#34;color:#5af78e&#34;&gt;`&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#ff6ac1&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#9aedfe&#34;&gt;never&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#ff6ac1&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#9aedfe&#34;&gt;never&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;type&lt;/span&gt; Paths &lt;span style=&#34;color:#ff6ac1&#34;&gt;=&lt;/span&gt; ObjectKeyPaths&lt;span style=&#34;color:#ff6ac1&#34;&gt;&amp;lt;&lt;/span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  foo&lt;span style=&#34;color:#ff6ac1&#34;&gt;:&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    bar&lt;span style=&#34;color:#ff6ac1&#34;&gt;:&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      baz: &lt;span style=&#34;color:#9aedfe&#34;&gt;number&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  arr: &lt;span style=&#34;color:#9aedfe&#34;&gt;number&lt;/span&gt;[]
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&lt;span style=&#34;color:#ff6ac1&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;const&lt;/span&gt; pathsObj&lt;span style=&#34;color:#ff6ac1&#34;&gt;:&lt;/span&gt; { [key &lt;span style=&#34;color:#ff6ac1&#34;&gt;in&lt;/span&gt; Paths]&lt;span style=&#34;color:#ff6ac1&#34;&gt;:&lt;/span&gt; key } &lt;span style=&#34;color:#ff6ac1&#34;&gt;=&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  foo&lt;span style=&#34;color:#ff6ac1&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#5af78e&#34;&gt;&amp;#39;foo&amp;#39;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  arr&lt;span style=&#34;color:#ff6ac1&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#5af78e&#34;&gt;&amp;#39;arr&amp;#39;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#5af78e&#34;&gt;&amp;#39;foo.bar&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#5af78e&#34;&gt;&amp;#39;foo.bar&amp;#39;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#5af78e&#34;&gt;&amp;#39;foo.bar.baz&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#ff6ac1&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#5af78e&#34;&gt;&amp;#39;foo.bar.baz&amp;#39;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;æ›´å¤š&#34;&gt;
  æ›´å¤š
&lt;/h2&gt;&lt;p&gt;TypeScript å…¶å®æœ‰å¾ˆå¤š fancy çš„å†™æ³•ï¼Œæˆ‘ä¹Ÿæ˜¯ä»è¿™ä¸ª &lt;a href=&#34;https://github.com/type-challenges/type-challenges&#34;&gt;repo&lt;/a&gt; å­¦äº†ä¸å°‘æ„Ÿå…´è¶£çš„å°ä¼™ä¼´å¯ä»¥å¤šåˆ·åˆ·æ¥æ›´å¥½åœ°äº†è§£ TS çš„ç±»å‹ç³»ç»Ÿ ï½&lt;/p&gt;</description>
    </item>
    
  </channel>
</rss>
